<% layout("layouts/boilerplate") %>
    <h2>結果発表</h2>
    <div class="card m-auto mt-4 shadow bg-body rounded" style="width: 100%;">
        <div class="mt-4 mb-4 m-auto">
            <p class="card-title ps-3 pe-3 ps-lg-2 pe-lg-2 p-font"><b>お題A</b></p>
            <p class="m-auto mt-3 ps-2 pe-2 ps-lg-1 pe-lg-1 p-font-title text-center"><b>
                    <%= themes.theme %>
                </b></p>
        </div>
        <div class="card-body bg-light">
            <p class="card-title p-font"><b>投稿者：<%= sortLists.length %>人</b></p>
            <p class="card-title p-font"><b>投票者：<%= sortLists[0].votedpoints.length %>人</b></p>
            <p class="card-title p-font"><b>得票数の数字をタップすると詳細が見られます</b></p>
        </div>
    </div>
    <div class="card m-auto mt-4 mb-4 bg-light shadow bg-body rounded" style="width: 100%;">
        <div class="mt-3 row m-auto" style="width: 97%;">
            <div class="col-2 col-sm-1 text-center">
                <p class="small-size">順位</p>
            </div>
            <div class="col-2 col-sm-1 text-center">
                <p class="small-size">得票数</p>
            </div>
            <div class="col-5 col-sm-7 text-center">
                <p class="small-size">ボケ</p>
            </div>
            <div class="col-1 text-center">
                <p class="small-size">2票</p>
            </div>
            <div class="col-1 text-center">
                <p class="small-size">3票</p>
            </div>
            <div class="col-1 text-center">
                <p class="small-size">4票</p>
            </div>
        </div>
        <% let i=1; for (let sortList of sortLists) { %>
            <div class="rank">
                <div class="border">
                    <div class="row mt-3 m-auto" style="width: 97%;">
                        <div class="col-2 col-sm-1 text-center pt-3">
                            <p class="small-size">
                                <%= i%>位
                            </p>
                        </div>
                        <div class="col-2 col-sm-1 text-center pt-3">
                            <p class="small-size"><a href="/oogiri/result/a/user/<%=sortList._id%>" class="resultLink">
                                    <%= sortList.point%>
                                </a></p>
                        </div>
                        <div class="col-5 col-sm-7 text-center pt-3">
                            <p class="small-size">
                                <%= sortList.joke%>
                                    <br>（<%= sortList.username%>）
                            </p>
                        </div>
                        <div class="col-1 text-center pt-3">
                            <% const filter2=sortList.votedpoints.filter((num)=> num.votepoint === 2);%>
                                <p class="small-size">
                                    <%= filter2.length %>
                                </p>
                        </div>
                        <div class="col-1 text-center pt-3">
                            <% const filter3=sortList.votedpoints.filter((num)=> num.votepoint === 3);%>
                                <p class="small-size">
                                    <%= filter3.length %>
                                </p>
                        </div>
                        <div class="col-1 text-center pt-3">
                            <% const filter4=sortList.votedpoints.filter((num)=> num.votepoint === 4);%>
                                <p class="small-size">
                                    <%= filter4.length %>
                                </p>
                        </div>
                    </div>
                </div>
            </div>
            <% i +=1; } %>
                <div class="mt-3 mb-3 text-center">
                    <a class="join-link m-auto" href="/">ホームに戻る</a>
                </div>
    </div>